<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>{{star.name}} Official Store</title>
  <link rel="shortcut icon" href="../static/img/favicon.ico" type="image/x-icon">
  <link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro' rel='stylesheet' type='text/css'>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>
  <script src="https://checkout.stripe.com/checkout.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/slideout/0.1.12/slideout.min.js"></script>
  <script src="../static/js/vibrant.min.js"></script>

  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="../static/css/shop.css">

</head>

<body>

<script>
var img = document.createElement('img');
img.crossOrigin = "Anonymous";
img.setAttribute('src', '{{star.image.profile}}')

img.addEventListener('load', function() {
  var vibrant = new Vibrant(img);
  var swatches = vibrant.swatches();
  console.log('Vibrant', swatches['Vibrant'].getHex());
  var btn = document.getElementById('activate-store');

  //$("#activate-store").css("background-color", swatches['DarkVibrant'].getHex());
  //$("#pay").css("background-color", swatches['DarkVibrant'].getHex());
  //$(".rangeslider__fill").css("background", swatches['DarkVibrant'].getHex());

$("a").mouseover(function() {
    $(this).css("color",swatches['DarkMuted'].getHex())
}).mouseout(function() {
    $(this).css("color",'#858585')
});
//$(".btn-view").mouseover(function() {
//    $(this).css("background-color",swatches['LightVibrant'].getHex())
//}).mouseout(function() {
//    $(this).css("background-color",'transparent')
//});
//$(".btn-add").mouseover(function() {
//    $(this).css("background-color",swatches['LightVibrant'].getHex())
//}).mouseout(function() {
 //   $(this).css("background-color",'transparent')
//});

});
</script>

<div id="loading"> Please Wait.. Order Processing...</div>
<script> $('#loading').hide();</script>

<!-- CART MENU -->
<div id="cart-menu">


  <div class="cart-and-total">
      <h2 class="title">Cart</h2>
       <span class="money" style="font-size:16px;">Total: $<span class="total-cost">0.00</span></span>
  </div>

  <div id="cart" class="cart" class="well" style="max-height:70%;overflow:auto;padding:5px;margin-top:20px;">
      <span id="alert-cart-empty"><br><br>The cart is empty!<br>Add a product to the cart by clicking
        <button class="btn btn-primary btn-add demo" role="button"><i class="fa fa-cart-plus"></i></button>
        <br>
                                    on a product card.</span>
  </div>

  <button class="btn btn-primary btn-checkout customButton" id="customButton"><i class="fa fa-check-circle-o"></i> Checkout</button>

</div>


<!-- SIDE PANEL -->
<div id="side-panel" class="side-panel">

  <button type="button" class="btn btn-primary btn-xs btn-toggle" data-toggle="offcanvas"><i class="fa fa-shopping-cart" style="font-size: 25px;"></i> $<span id="total-cost">0.00</span></button>
  <div class="profile-img-container">
    <img class="profile-img" src="data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=" data-src="{{star.image.profile}}">
  </div>

  {% if star.name != "Fandemic" %}
  <h2>{{star.name}}</h2>
  {% else %}
  <h2></h2><br>
  {% endif %}

  <div id="social-media">
    <a class="link" target="_blank" href="{{star.url.youtube}}"><i class="fa fa-youtube"></i></a>
    <a class="link" target="_blank" href="{{star.url.instagram}}"><i class="fa fa-instagram"></i></a>
    <a class="link" target="_blank" href="{{star.url.facebook}}"><i class="fa fa-facebook"></i></a>
    <a class="link" target="_blank" href="{{star.url.twitter}}"><i class="fa fa-twitter"></i></a>
  </div>



  {% if star.active == false %}
  <div style="padding:1px;">
    <hr>
    <p style="padding:10px;">Your Customized Fandemic store lets you sell custom fan boxes.</p>
    <h5>Charity Contributions <i class="fa fa-question-circle" aria-hidden="true"></i></h5>
    <h4>$0.00</h4>

  </div>
  <button id="activate-store" href="#" data-toggle="modal" data-target="#activateStoreModal" class="btn btn-success btn-activate">Stock Store</button>

  {% else %}
  <div style="padding: 0px 10px 0px 10px;">
  <strong>Welcome to {{star.name}}'s <br>Official Fandemic store!</strong>
  <hr>
  If you need any help click the "Customer Service" button below and the
  Fandemic team will help you right away!

  <!-- <span style="font-size:35px;color:#adadad;"><i class="fa fa-arrow-down"></i></span> -->
  </div>
  <button href="#" data-toggle="modal" data-target="#customerServiceModal" class="btn btn-info btn-activate"><i class="fa fa-question-circle"></i> Help</button>
  {% endif %}

  <div class="footer">
    <p class="copyright text-muted small">Copyright &copy; Fandemic. 2016. All Rights Reserved. &nbsp;
      <strong>Patent Pending</strong>
  </div>
</div>



<div class="controls">
  <!--<input style="float:left" type="text" class="form-control filtr-search" name="filtr-search" placeholder="Product Search" data-search>-->


    {% if star.image.logo is defined %}
    <img style="position:absolute;height:60px;top:5px;" src="{{star.image.logo}}">
    {% else %}
    <span style="position:absolute;height:60px;top:15px;font-size:25px;color:#c7c7c7;"> {{star.name}} Logo </span>
    {% endif %}

    <div style="text-align:center">
      <span style="text-align:center;color:#b7b7b7;">Questions on how to stock your store? Call 443-536-4110 to speak to a representative!</span>
    </div>

    <div class="btns">
      <a href="/" class="button"><i class="fa fa-home" aria-hidden="true"></i></a>
      <i data-toggle="modal" data-target="#customerServiceModal" class="fa fa-info-circle button" aria-hidden="true"></i>
      <i class="fa fa-shopping-cart cart-button button"><span class="num-items"></span></i>
    </div>


</div>


<!-- CENTER PANEL -->
<div id="center-panel" class="container-fluid">

  <!--<div class="row">-->


{% if star.active == false %}
 <!-- SAMPLE PRODUCTS VERSION -->
  {% set count = 1 %}
  {% for p in products %}
  {% if count == 1 %}<div class="row">
    {% endif %}
  <div class="col-md-6 col-lg-4"
       data-category="{% for id in p.subcatID %}{{id}}{% if not loop.last %}, {% endif %}{% endfor %}"
       data-sort="" style="padding: 25px;padding-top:10px;padding-bottom:10px;">

    <div class="thumbnail">


        <span class="product-id">{{p.sku}}</span>
        <div class="card-header">
        <!--  <span class="hours-remaining"><i class="fa fa-clock-o"></i> 14 days</span>
          <img width="30px" class="shipping-icon" src="data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=" data-src="../static/img/shipping-icon.png">
          <div class="progress">
            <div class="progress-bar progress-bar-primary progress-bar-striped" role="progressbar" aria-valuenow="44"
            aria-valuemin="0" aria-valuemax="{{p.description.minOrderQty}}" style="width:50%">
              <span class="progress-text">{{(p.description.minOrderQty / 2)|round|int}} Orders Needed!</span>
            </div>
          </div>-->
        </div>
        <img width="500px" height="500px"
             data-toggle="modal"
             data-target="#modal-{{p.sku}}"
             class="product-picture"
             src="data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="
             {% if star.samplesUploaded is defined %}
             data-src="../static/img/sample_products/stars/{{star.id}}/{{p.default_img[0]}}"
             {% else %}
             data-src="../static/img/sample_products/{{p.category}}/{{p.default_img[0]}}"
             {% endif %}
             >


        <div class="row variations">
            <div
              class="{% if p.variations.color is defined %}
                        col-md-6
                     {% else %}
                        col-md-12
                     {% endif %}
                        variation1">
              <div class="name"><span>size</span></div>
              <select class="form-control">
                {% for s in p.variations.size %}
                <option>{{s}}</option>
                {% endfor %}
              </select>
            </div>
            {% if p.variations.color is defined %}
            <div class="col-md-6 variation2">
              <div class="name"><span>color</span></div>
              <select class="form-control">
                  {% for c in p.variations.color %}
                  <option>{{c.name}}</option>
                  {% endfor %}
              </select>
            </div>
            {% endif %}
        </div>

        <div class="caption">
          <h3 class="title">{{p.name}}</h3>
          <span class="money">$<span class="price">{{p.price}}</span></span>
          <button class="add-to-cart btn btn-primary btn-add" role="button"><i class="fa fa-cart-plus"></i></button>
          <button class="btn btn-primary btn-view" role="button" data-toggle="modal" data-target="#modal-{{p.sku}}"><i class="fa fa-eye" aria-hidden="true"></i></button>
        </div>
    </div>
  </div>


  <!-- Product Description Modal -->
  <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" style="z-index:99999;" id="modal-{{p.sku}}">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
        <h2 class="modal-title" id="myModalLabel">{{p.name}} Description</h2>
        <hr>
        <div class="row">
        <div class="col-md-8">
          <img width="500px" height="500px"
               class="product-picture img-responsive"
               src="data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="
               data-src="../static/img/sample_products/{{p.category}}/{{p.default_img[0]}}">
        </div>
        <div class="col-md-4">
          <div class="product-description">
              <h2>Order Requirement</h2>
                <p>This campaign needs atleast <span class="emphasize">{{p.description.minOrderQty}}</span> preorders in order for {{p.name}} to be shipped.</p>
              <h2>Composition</h2>
                <p><strong>Material:</strong> {{p.description.material}}</p>
                <p><strong>Fabric:</strong>  {{p.description.fabric}}</p>
              <h2>Specialty</h2>
                <p><strong>Special:</strong>  {{p.description.special}}</p>
                <p><strong>Design:</strong>  {{p.description.design}}</p>

          </div>
          {% for img in p.default_img %}
          <div class="product-sample-view">
            <img width="50px" height="50px" src="data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=" data-src="../static/img/sample_products/{{p.category}}/{{img}}">
          </div>
          {% endfor %}
        </div>
      </div>
      </div>
    </div>
  </div>
  {% if count % 3 == 0 %}</div><div class="row">
  {% endif %}
  {% set count = count + 1 %}
  {% endfor %}

{% else %}
 <!-- ACTIVE STORE PRODUCTS VERSION -->
  {% for p in products %}
  <div class="col-md-6 col-lg-4"
       data-category="{% for id in p.subcatID %}{{id}}{% if not loop.last %}, {% endif %}{% endfor %}"
       data-sort="Create Your Own" style="padding: 25px;padding-top:10px;padding-bottom:10px;">

    <div class="thumbnail">


        <span class="product-id">{{p.sku}}</span>
        <div class="card-header">

          <img width="30px" class="shipping-icon" style="opacity:.5;" src="data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=" data-src="../static/img/shipping-icon.png">
          <div class="progress">
            <span class="progress-text" style="color:#9d9d9d;">{{(p.minQty - p.currentQty)|round|int}} Boxes Remaining!</span>
            <div class="progress-bar progress-bar-primary progress-bar-striped" role="progressbar" aria-valuenow="{{p.currentQty}}"
            aria-valuemin="0" aria-valuemax="{{p.minQty}}" style="width:{{p.currentQty + 1}}%">

            </div>
          </div>
        </div>
        <img width="500px" height="500px"
             data-toggle="modal" data-target="#modal-{{p.sku}}"
             class="product-picture"
             src="data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="
             data-src="../static/img/products/{{star.id}}/{{p.default_img[0]}}">

        <div class="row variations">
            <div class="col-lg-12 variation1">
              <div class="name"><span>Shirt Size</span></div>
              <select class="form-control">
                {% for s in p.variations.size %}
                <option>{{s}}</option>
                {% endfor %}
              </select>
            </div>
        </div>

        <div class="caption">
          <h3 class="title">{{p.name}}</h3>
          <span class="money">$<span class="price">{{p.price}}</span></span>
          <button class="add-to-cart btn btn-primary btn-add" role="button"><i class="fa fa-cart-plus"></i></button>
          <button class="btn btn-primary btn-view" role="button" data-toggle="modal" data-target="#modal-{{p.sku}}"><i class="fa fa-eye" aria-hidden="true"></i></button>
        </div>
    </div>
  </div>


  <!-- Product Description Modal -->
  <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" style="z-index:99999;" id="modal-{{p.sku}}">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
        <h2 class="modal-title" id="myModalLabel">{{p.name}} Description</h2>
        <hr>
        <div class="row">
        <div class="col-md-8">
          <img width="500px" height="500px"
               class="product-picture img-responsive"
               src="data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="
               data-src="../static/img/products/{{star.id}}/{{p.default_img[0]}}"
               >
        </div>
        <div class="col-md-4">
          <div class="product-description">
              <h2>Order Requirement</h2>
                <p>This campaign needs atleast <span class="emphasize">{{p.description.minOrderQty}}</span> preorders in order for {{p.name}} to be shipped.</p>
              <h2>Composition</h2>
                <p><strong>Material:</strong> {{p.description.material}}</p>
                <p><strong>Fabric:</strong>  {{p.description.fabric}}</p>
              <h2>Specialty</h2>
                <p><strong>Special:</strong>  {{p.description.special}}</p>
                <p><strong>Design:</strong>  Custom designs, logos, colors, and any modifications can be made, just ask!</p>

          </div>
          {% for v in p.variations.color %}
          {% for i in v.img %}
          <div class="product-sample-view">
            <img width="50px" height="50px"
                 src="data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="
                 data-src="../static/img/products/{{star.id}}/{{i}}"
                 >
          </div>
          {% endfor %}
          {% endfor %}
        </div>
      </div>
      </div>
    </div>
  </div>
  {% endfor %}
{% endif %}

</div>
</div>

  <!-- Deferred Image Loading for Products -->
  <script>
  function init() {
  var imgDefer = document.getElementsByTagName('img');
  for (var i=0; i<imgDefer.length; i++) {
  if(imgDefer[i].getAttribute('data-src')) {
  imgDefer[i].setAttribute('src',imgDefer[i].getAttribute('data-src'));
  } } }
  window.onload = init;
  </script>

  </body>

</html>

<!-- STORE STOCKER MODAL -->
<div class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" id="activateStoreModal">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>

      <div class="modal-header">
      <h3 class="modal-title" id="myModalLabel">Stock Store Wizard</h3>
      <p>Virtually stock your store with fan boxes! We handle the hard part!</p>
    </div>

      <div class="row" style="padding:20px;">

        <div class="col-md-3">

          <h4>Box Items
              <i class="fa fa-question-circle" aria-hidden="true"
              data-toggle="popover"
              data-content="These are the products you can add to your box.
                         Check off the ones the you want!"></i>
          </h4>


          <!-- Generate item checklists and give attributes -->
          {% for p in pricing %}
          {% if p.name != 'Box' %}
          <div class="checkbox">
            <label>
              <input type="checkbox" class="box-item"
                     value="{{p.name}}">{{p.name}}</label>
          </div>
          {% endif %}
          {% endfor %}


        <hr>

        <h4>Gender
            <i class="fa fa-question-circle" aria-hidden="true"
            data-toggle="popover"
            data-content="Are your boxes for men, women, or both?"></i>
        </h4>
          <div class="checkbox">
            <label><input type="checkbox" value="">Male</label>
          </div>
          <div class="checkbox">
            <label><input type="checkbox" value="">Female</label>
          </div>

         <hr>

         <div class="price-table" style="width:100%;">
                 <table style="width:100%;">
                   <thead>
                     <tr>
                       <th>Quantity</th>
                       <th>Stocking Fee</th>
                     </tr>
                   </thead>

                   <tbody>

                       <tr>
                         <td>10</td>
                         <td>$200</td>
                       </tr>

                       <tr>
                         <td>25</td>
                         <td>$400</td>
                       </tr>

                       <tr class="selected">
                         <td>50</td>
                         <td>$750</td>
                       </tr>

                       <tr>
                         <td>100</td>
                         <td>$1,300</td>
                       </tr>

                       <tr>
                         <td>150</td>
                         <td>$1,800</td>
                       </tr>

                       <tr>
                         <td>250</td>
                         <td>$2,500</td>
                       </tr>

                       <tr>
                         <td>500</td>
                         <td>$4,500</td>
                       </tr>

                       <tr>
                         <td>1000</td>
                         <td>$8,500</td>
                       </tr>

                   </tbody>
                 </table>
               </div>

        </div>

        <div class="col-md-9" style="padding-left:40px;">

          <h4>Quantity
              <i class="fa fa-question-circle" aria-hidden="true"
              data-toggle="popover"
              data-content="Move the slider to change the number of custom boxes
                            you want to stock in this store. The more boxes you stock,
                            the more money you can make!"></i>
          </h4>
          <br>
          <input type="range" min="10" max="1000" step="5" value="100" data-rangeslider>

          <span id="quantity"></span>


          <br><br><br><br>
          <div class="row" style="text-align:center;font-size:20px;">
            <div class="col-md-6" >
              <div class="well" style="padding:15px;">
                <h5>Stocking Fee
                    <i class="fa fa-question-circle" aria-hidden="true"
                    data-toggle="popover"
                    data-content="An initial fee to stock your store. This covers manufacturing.
                                  No worries, you get it back when the boxes sell!"></i>
                </h5>
                $<span id="box-stocking-fee">15.00</span> per box
              </div>
            </div>
            <div class="col-md-6" >
              <div class="well" style="padding:15px;">
                <h5>Retail Price
                    <i class="fa fa-question-circle" aria-hidden="true"
                    data-toggle="popover"
                    data-content="How much your customers will pay for this box."></i>
                </h5>
                $<span id="box-retail-price">39.99</span> per box
              </div>
            </div>
          </div>
          <div class="row" style="text-align:center;font-size:20px;">
            <div class="col-md-6" >
              <div class="well" style="padding:15px;">
                <h5>Fandemic Fee
                    <i class="fa fa-question-circle" aria-hidden="true"
                    data-toggle="popover"
                    data-content="A small fee for the Fandemic team so we can keep
                                  the lights on and keep providing you with beautiful products!
                                  We only take this when a box sells."></i>
                </h5>
                $<span id="box-fandemic-fee">5.00</span> per box
              </div>
            </div>
            <div class="col-md-6" >
              <div class="well" style="padding:15px;">
                <h5>Your Profit
                    <i class="fa fa-question-circle" aria-hidden="true"
                    data-toggle="popover"
                    data-content="This is how much money you will make from each sale
                                (this does not include the reimursable stocking fee)."></i>
                </h5>
                $<span id="box-profit-per-item">20.00</span> per box
              </div>
            </div>
          </div>

            <div class="row" style="text-align:center;">
              <br>
              <h4>You will make $<span id="stocking-fee">2,000.00</span> total profit if you sell these boxes</h4>
            </div>
        </div>

      </div>

      <div class="modal-footer">
        <p style="float:left;">Questions? Call 443-536-4110 for Customer Service.</p>
        <button id="pay" data-dismiss="modal" class="btn btn-success payStockingButton">Next</button>
      </div>


    </div>
  </div>
</div>

<!-- Customer Service Modal -->
<div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" id="customerServiceModal">
  <div class="modal-dialog modal-lg">
  <div class="vertical-alignment-helper">
    <div class="modal-dialog vertical-align-center">
    <div class="modal-content">
      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
      <h2 class="modal-title" id="myModalLabel">Customer Service</h2><br>
      <p>Fandemic manages {{star.name}}'s official store<br>
         If you have any questions or issues with the platform please use the tools below</p>
      <br>

      <div>
        <!-- Nav tabs -->
        <ul class="nav nav-tabs" role="tablist">
          <!-- <li role="presentation" class="active"><a href="#howitworks" aria-controls="howitworks" role="tab" data-toggle="tab">How It Works</a></li> -->
          <li role="presentation" class="active"><a href="#faq" aria-controls="faq" role="tab" data-toggle="tab">FAQ</a></li>
          <li role="presentation"><a href="#contact" aria-controls="contact" role="tab" data-toggle="tab">Contact</a></li>
          <li role="presentation"><a href="#sizing" aria-controls="sizing" role="tab" data-toggle="tab">Clothing Measurements</a></li>
        </ul>
      </div>

      <!-- Tab panes -->
      <div class="tab-content">
        <!-- <div role="tabpanel" class="tab-pane fade in active" id="howitworks">
          <div class="row">


            <div class="col-md-5">
              <div class="thumbnail">
                <span class="product-id">hoodie-2</span>
                <div class="card-header">
                  <span class="hours-remaining"><i class="fa fa-clock-o"></i> 14 days</span>
                  <img width="30px" class="shipping-icon" src="../static/img/shipping-icon.png">
                  <div class="progress">
                    <div class="progress-bar progress-bar-primary progress-bar-striped" role="progressbar" aria-valuenow="44" aria-valuemin="0" aria-valuemax="40" style="width:50%">
                      <span class="progress-text">20 Orders Needed!</span>
                    </div>
                  </div>
                </div>
                <img width="500px" height="500px" class="product-picture" src="../static/img/products/hoodie-2/hoodie-2.png" alt="...">
                <div class="caption">
                  <h3 class="title">Fitness Hoodie</h3>
                  <span class="money">$<span class="price">39.99</span></span>

                </div>
                <button class="add-to-cart btn btn-primary btn-add" role="button"><i class="fa fa-cart-plus"></i></button>
              </div>
            </div>

            <div class="col-md-7" style="text-align:left;">
              <p><i class="fa fa-arrow-left"></i> This is a <strong>product card</strong></p>

              <br>
              <div class="well">
                <p>The <strong>timer</strong> shows you how long the product is on sale
                </p>
                <span style="color:red;"><i class="fa fa-clock-o"></i> 14 days</span>
              </div>

              <br>
              <div class="well">
                <p>The <strong>shipping bar</strong> shows you how many orders are needed
                   before the product ships
                </p>
                 <div class="progress" style="width:70%;opacity:1;">
                   <img style="top:0px;right:11px;" width="30px" class="shipping-icon" src="../static/img/shipping-icon.png">
                   <div class="progress-bar progress-bar-primary progress-bar-striped" role="progressbar" aria-valuenow="44" aria-valuemin="0" aria-valuemax="40" style="width:50%">
                     <span class="progress-text">20 Orders Needed!</span>
                   </div>
                 </div>
              </div>
            </div>
          </div>
        </div> -->

        <div role="tabpanel" class="tab-pane fade in active" id="faq">
                    <!-- Tab panes -->
                    <div class="tab-content faq-cat-content">
                        <div class="tab-pane active in fade" id="faq-cat-1">
                            <div class="panel-group" id="accordion-cat-1">
                                <div class="panel panel-default panel-faq">
                                    <div class="panel-heading">
                                        <a data-toggle="collapse" data-parent="#accordion-cat-1" href="#faq-cat-1-sub-1">
                                            <h4 class="panel-title">
                                                So what's the story?
                                                <span class="pull-right"><i class="glyphicon glyphicon-plus"></i></span>
                                            </h4>
                                        </a>
                                    </div>
                                    <div id="faq-cat-1-sub-1" class="panel-collapse collapse">
                                        <div class="panel-body">
                                          Stars sign up to allow their fans to preorder products via their Fandemic store. Each product has a minimum quantity order, if that number of pre orders is met in the alotted time then the Fandemic team produces and ships them off!                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="panel-group" id="accordion-cat-2">
                                <div class="panel panel-default panel-faq">
                                    <div class="panel-heading">
                                        <a data-toggle="collapse" data-parent="#accordion-cat-2" href="#faq-cat-2-sub-1">
                                            <h4 class="panel-title">
                                              What happens if the minimum preorders are not met?
                                                <span class="pull-right"><i class="glyphicon glyphicon-plus"></i></span>
                                            </h4>
                                        </a>
                                    </div>
                                    <div id="faq-cat-2-sub-1" class="panel-collapse collapse">
                                        <div class="panel-body">
                                          In the event that this product's campaign does not reach its' minimum order quantity within the specified time frame, the Fandemic team will refund 100% of your payment.
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="panel-group" id="accordion-cat-3">
                                <div class="panel panel-default panel-faq">
                                    <div class="panel-heading">
                                        <a data-toggle="collapse" data-parent="#accordion-cat-3" href="#faq-cat-3-sub-1">
                                            <h4 class="panel-title">
                                              How long does it take to get my refund?
                                                <span class="pull-right"><i class="glyphicon glyphicon-plus"></i></span>
                                            </h4>
                                        </a>
                                    </div>
                                    <div id="faq-cat-3-sub-1" class="panel-collapse collapse">
                                        <div class="panel-body">
                                          You will receive your refund within one week max!
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="panel-group" id="accordion-cat-4">
                                <div class="panel panel-default panel-faq">
                                    <div class="panel-heading">
                                        <a data-toggle="collapse" data-parent="#accordion-cat-4" href="#faq-cat-4-sub-1">
                                            <h4 class="panel-title">
                                              How do I get my own Fandemic Store?
                                                <span class="pull-right"><i class="glyphicon glyphicon-plus"></i></span>
                                            </h4>
                                        </a>
                                    </div>
                                    <div id="faq-cat-4-sub-1" class="panel-collapse collapse">
                                        <div class="panel-body">
                                          Simply go to the <a href="http://fandemic.co">Fandemic Homepage</a> and click "Activate Store" at the top.
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="panel-group" id="accordion-cat-5">
                                <div class="panel panel-default panel-faq">
                                    <div class="panel-heading">
                                        <a data-toggle="collapse" data-parent="#accordion-cat-5" href="#faq-cat-5-sub-1">
                                            <h4 class="panel-title">
                                              How long does shipping take?
                                                <span class="pull-right"><i class="glyphicon glyphicon-plus"></i></span>
                                            </h4>
                                        </a>
                                    </div>
                                    <div id="faq-cat-5-sub-1" class="panel-collapse collapse">
                                        <div class="panel-body">
                                          It really varies on your location, but shipping could range from 5-7 business days.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
        </div>
        <div role="tabpanel" class="tab-pane fade" id="contact">
          <form id="support-contact-form" action="/supportContactForm" method="post">
                  <div class="row">
                    <div class="col-md-6">
                      <div class="input-group input-group-lg">
                        <span class="input-group-addon" id="sizing-addon1"><i class="fa fa-user"></i></span>
                        <input id="support_firstname" name="name" type="text" class="form-control" placeholder="Enter your Name">
                      </div>
                      <br>
                    </div>
                    <div class="col-md-6">
                      <div class="input-group input-group-lg">
                        <span class="input-group-addon" id="sizing-addon1"><i class="fa fa-envelope"></i></span>
                        <input id="support_email" name="email" type="text" class="form-control" placeholder="Enter your Email">
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-12">
                      <div class="input-group-lg">
                      <input id="support_message" style="height:7em" name="message" type="text" class="form-control" placeholder="Enter your Message">
                    </div>
                    </div>
                  </div>
                  <hr>
                  <button type="submit" style="float:left" class="btn btn-primary center btn-submit" id="support-form-button">Submit</button>
                  <p id="support-form-notification"></p>
                </form>
        </div>
        <div role="tabpanel" class="tab-pane fade" id="sizing">
          <img src="../static/img/measurements.png" style="width:80%">
        </div>
      </div>
    </div>
</div>
  </div>
</div>
</div>

<!-- Payment Success Modal -->
<div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" id="paymentSuccessModal">
  <div class="modal-dialog modal-md">
    <div class="modal-content">
      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
      <h2 class="modal-title" id="myModalLabel">Order Successful!</h2>
      <p>You should receive a receipt shortly</p>
      <hr>
      <p>If the product(s) you ordered do not reach a minimum order you get a full refund.</p>
      <br>
      <p>Questions or concerns? Email us at <strong>support@fandemic.co</strong> and we will respond within 24 hours. Thanks!</p>
    </div>
  </div>
</div>



  <!-- Kick off Filterizr -->
<script src="../static/js/countdown.min.js"></script>
<script src="../static/js/shop.js"></script>
<script src="../static/js/desktop.js"></script>
<link rel="stylesheet" href="../static/css/rangeslider.css">
<script src="../static/js/rangeslider.min.js"></script>

<script>
$('i').popover({'trigger':'hover'});
</script>

<script>
      var pricing_index = {};
    {% for p in pricingjs %}
      var temp = {{p|safe}};
      pricing_index[temp.name] = {};
      pricing_index[temp.name]['mfc'] = temp.pricing;
      pricing_index[temp.name]['retail'] = temp.retail;
    {% endfor %}
    var box_quantity = 0;
    var box_stockingFee = 0;
    var stockingFee = 0;
    var itemsInBox = [];
    $(function() {
        var $document = $(document);
        var selector = '[data-rangeslider]';
        var $element = $(selector);

        $element.rangeslider({
            // Deactivate the feature detection
            polyfill: false,
            // Callback function
            onInit: function() {
              updateBox(100);
            },
            // Callback function
            onSlide: function(position, value) {
              updateBox(value);
            },
            // Callback function
            onSlideEnd: function(position, value) {
                console.log('onSlideEnd');
                console.log('position: ' + position, 'value: ' + value);
            }
        });
    });
    </script>

    <!-- Change wizard state based on check boxes -->
    <script>
    $('.box-item').on('change', function(){ // on change of state
       if(this.checked) // if changed state is "CHECKED"
        {
          addBoxItem(this);
          updateBoxx();
        }
       else{
          removeBoxItem(this);
          updateBoxx();
        }
      });

      function addBoxItem(item){
        itemsInBox.push(item.value);
      }

      function removeBoxItem(item){
        var index = itemsInBox.indexOf(item.value);
        itemsInBox.splice(index, 1);
      }

      function updateBoxx(){

        box_stockingFee = 0;
        box_retail = 0;

        for (i in itemsInBox){
          item = itemsInBox[i];
          box_stockingFee = box_stockingFee + pricing_index[item]['mfc'][0];
          box_retail = box_retail + pricing_index[item]['retail'];
        }

        box_fandemicFee = 5.00;
        retail = box_quantity * box_retail;
        stockingFee = box_quantity * box_stockingFee;
        fandemicFee = box_quantity * box_fandemicFee;
        profitPerItem = box_retail - (box_stockingFee + box_fandemicFee);
        totalProfit = retail - (stockingFee + fandemicFee);

        $('#stocking-fee').text(totalProfit.formatMoney(2));
        $('#box-stocking-fee').text(box_stockingFee.formatMoney(2));
        $('#box-retail-price').text(box_retail.formatMoney(2));
        $('#box-profit-per-item').text(profitPerItem.formatMoney(2));

      }

      function updateBox(qty){

        box_quantity = qty;
        var level = 0;
        if (10 <= box_quantity && box_quantity <= 24) level = 0
        else if (25 <= box_quantity && box_quantity <= 49) level = 1
        else if (50 <= box_quantity && box_quantity <= 99) level = 2
        else if (100 <= box_quantity && box_quantity <= 149) level = 3
        else if (150 <= box_quantity && box_quantity <= 249) level = 4
        else if (250 <= box_quantity && box_quantity <= 499) level = 5
        else if (500 <= box_quantity && box_quantity <= 999) level = 6
        else if (1000 <= box_quantity && box_quantity <= 10000) level = 7

        box_stockingFee = 0;
        box_retail = 0;

        for (i in itemsInBox){
          item = itemsInBox[i];
          box_stockingFee = box_stockingFee + pricing_index[item]['mfc'][level];
          box_retail = box_retail + pricing_index[item]['retail'];
        }

        box_fandemicFee = 5.00;
        retail = box_quantity * box_retail;
        stockingFee = box_quantity * box_stockingFee;
        fandemicFee = box_quantity * box_fandemicFee;
        profitPerItem = box_retail - (box_stockingFee + box_fandemicFee);
        totalProfit = retail - (stockingFee + fandemicFee);

        $('#quantity').text(qty);
        $('#stocking-fee').text(totalProfit.formatMoney(2));
        $('#box-stocking-fee').text(box_stockingFee.formatMoney(2));
        $('#box-retail-price').text(box_retail.formatMoney(2));
        $('#box-profit-per-item').text(profitPerItem.formatMoney(2));
      }
    </script>

<script>
var handler = StripeCheckout.configure({
{% if star.active == false %}
key: 'pk_test_z1mq9KQ3GyakW5OdduPIX94u',
{% else %}
key: 'pk_live_kyvM71oajfwVWnxBoy7SfqOp',
{% endif %}
image: '{{star.image.profile}}',
locale: 'auto',
token: function(token,args) {

  //gather info from the order
  var info = {};
  info['star'] = "{{star.name}}";
  info['star_id'] = "{{star.id}}";
  info['active'] = "{{star.active}}";
  info['amount'] = Math.round(total_cost * 100);
  info['cart'] = cart;

  //combine all info into one object
  var result={};
  $.extend(result, args, token);
  $.extend(result, result, info);

  $.ajax({
    type: 'POST',
    url: '/charge',
    data: JSON.stringify(result, null, '\t'),
    contentType: 'application/json;charset=UTF-8',
    success: function(response) {
      $("#paymentSuccessModal").modal()
      resetCart();
    },
    error: function(error) {
      alert("payment error");
    }
  });

}
});

var handler2 = StripeCheckout.configure({
{% if star.active == false %}
key: 'pk_test_z1mq9KQ3GyakW5OdduPIX94u',
{% else %}
key: 'pk_live_kyvM71oajfwVWnxBoy7SfqOp',
{% endif %}
image: '{{star.image.profile}}',
locale: 'auto',
token: function(token,args) {

  //gather info from the order
  var info = {};
  info['star'] = "{{star.name}}";
  info['star_id'] = "{{star.id}}";
  info['active'] = "{{star.active}}";
  info['amount'] = Math.round(total_cost * 100);
  info['cart'] = cart;

  //combine all info into one object
  var result={};
  $.extend(result, args, token);
  $.extend(result, result, info);

  $.ajax({
    type: 'POST',
    url: '/charge',
    data: JSON.stringify(result, null, '\t'),
    contentType: 'application/json;charset=UTF-8',
    success: function(response) {
      $("#paymentSuccessModal").modal()
      resetCart();
    },
    error: function(error) {
      alert("payment error");
    }
  });

}
});

$( document ).ajaxStart(function () {
  $('#loading').show();  // show loading indicator
});

$( document ).ajaxStop(function()
{
    $('#loading').hide();  // hide loading indicator
});


$('.payStockingButton').on('click', function(e) {
// Open Checkout with further options
handler2.open({
name: 'Stocking Fee',
description: box_quantity +
             ' boxes X $'+ box_stockingFee.formatMoney(2) +
             ' = $' + stockingFee.formatMoney(2),
allowRememberMe: true,
panelLabel: "Pay",
email: '{{star.email.0}}',
amount: Math.round(stockingFee * 100)
});
e.preventDefault();
});


$('.customButton').on('click', function(e) {
// Open Checkout with further options
handler.open({
name: 'ORDER TOTAL',
description: '$' + total_cost.formatMoney(2),
zipCode: true,
billingAddress: true,
shippingAddress: true,
allowRememberMe: true,
panelLabel: "Pay",
amount: Math.round(total_cost * 100)
});
e.preventDefault();
});

// Close Checkout on page navigation
$(window).on('popstate', function() {
handler.close();
});
</script>

{% include 'analytics.html' %}
